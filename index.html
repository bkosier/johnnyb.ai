<!-- Same header, styles, hero, about, chat, events sections as before -->

<section id="news">
    <h2>Local News Headlines (Feb 17, 2026 – Click to Read)</h2>
    <div id="news-grid" class="happening-grid"></div>
    <button onclick="fetchLocalNews()" class="refresh-btn">Refresh News</button>
</section>

<!-- ... other sections ... -->

<script>
    // ... other script parts unchanged ...

    async function fetchLocalNews() {
        const grid = document.getElementById('news-grid');
        grid.innerHTML = '<p class="loading-placeholder">Fetching news...</p>';
        try {
            const apiKey = 'd1936c782ab2cf357102934ec9f0d18f';
            const today = new Date().toISOString().split('T')[0];
            const query = 'Biloxi OR Gulfport OR Pascagoula OR "Mardi Gras" OR "New Orleans" OR Mobile lang:en';
            const url = `https://gnews.io/api/v4/search?q=${encodeURIComponent(query)}&from=${today}&lang=en&country=us&max=6&apikey=${apiKey}`;
            const response = await fetch(url);
            if (!response.ok) throw new Error(`GNews ${response.status}`);
            const data = await response.json();

            if (data.articles && data.articles.length > 0) {
                grid.innerHTML = '';
                data.articles.forEach(article => {
                    const card = document.createElement('div');
                    card.className = 'happening-card';

                    let originalImg = article.image || getFallbackImage(article.title);
                    let imgSrc = `https://johnnyb.ai/cdn-cgi/image/format=auto,width=320,quality=80/${encodeURIComponent(originalImg)}`;

                    card.innerHTML = `
                        <div class="news-img-container">
                            <img src="${imgSrc}" alt="${article.title || 'News'}" loading="lazy" onerror="this.src='https://via.placeholder.com/320x180?text=News+Image'">
                        </div>
                        <div class="card-content">
                            <h3>${article.title || 'Untitled'}</h3>
                            <p>${article.description || 'No description.'}</p>
                            <a href="${article.url}" target="_blank">Read Article (Source: ${article.source?.name || 'GNews'})</a>
                        </div>
                    `;
                    grid.appendChild(card);
                });
            } else {
                populateFallbackNews();
            }
        } catch (error) {
            console.error('News error:', error);
            populateFallbackNews();
        }
    }

    function getFallbackImage(title) {
        const t = (title || '').toLowerCase();
        if (t.includes('mardi gras') || t.includes('parade') || t.includes('fat tuesday')) {
            return 'https://images.unsplash.com/photo-1618005182384-a83a8bd0d5c8?auto=format&fit=crop&w=800&q=80';
        }
        if (t.includes('biloxi') || t.includes('gulfport')) {
            return 'https://images.unsplash.com/photo-1563299796-17596ed6b017?auto=format&fit=crop&w=800&q=80';
        }
        if (t.includes('mobile')) {
            return 'https://images.unsplash.com/photo-1580130718646-9f694209b207?auto=format&fit=crop&w=800&q=80';
        }
        return 'https://via.placeholder.com/320x180?text=News+Image';
    }

    function populateFallbackNews() {
        const grid = document.getElementById('news-grid');
        grid.innerHTML = '';
        // Same fallback cards as before, but with Cloudflare proxy
        const fallbacks = [
            { title: 'Fat Tuesday Fun Underway in Biloxi', desc: 'GCCA parade rolling soon — live coverage on WLOX.', url: 'https://www.wlox.com/', img: 'https://images.unsplash.com/photo-1618005182384-a83a8bd0d5c8?auto=format&fit=crop&w=800&q=80' },
            // ... other fallbacks ...
        ];
        fallbacks.forEach(item => {
            const card = document.createElement('div');
            card.className = 'happening-card';
            card.innerHTML = `
                <div class="news-img-container">
                    <img src="https://johnnyb.ai/cdn-cgi/image/format=auto,width=320,quality=80/${encodeURIComponent(item.img)}" alt="${item.title}" loading="lazy">
                </div>
                <div class="card-content">
                    <h3>${item.title}</h3>
                    <p>${item.desc}</p>
                    <a href="${item.url}" target="_blank">Read Article</a>
                </div>
            `;
            grid.appendChild(card);
        });
    }

    // Weather fetch remains the same (with your key)
    // ...
</script>
